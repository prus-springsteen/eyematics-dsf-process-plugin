<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1qnq7wk" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.31.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.22.0">
  <bpmn:process id="eyematicsorg_eyematicsReceiveProcess" name="EyeMatics Receive Process" isExecutable="true" camunda:versionTag="#{version}">
    <bpmn:startEvent id="eyematicsReceiveProcessInitiateEvent" name="Receive Process Initiate Event">
      <bpmn:outgoing>Flow_18spp16</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0hxfc4s" messageRef="Message_2vm6cli" />
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_18spp16" sourceRef="eyematicsReceiveProcessInitiateEvent" targetRef="PrepareReceiveDataTask" />
    <bpmn:endEvent id="Event_0xptxan" name="Receive Process End Event">
      <bpmn:incoming>Flow_1utufn4</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:eventBasedGateway id="Gateway_1drw5fq">
      <bpmn:extensionElements>
        <camunda:executionListener class="org.eyematics.process.utils.listener.CorrelationKeyProcessListener" event="start" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1wda44y</bpmn:incoming>
      <bpmn:outgoing>Flow_09l5l7b</bpmn:outgoing>
      <bpmn:outgoing>Flow_0yo3vyn</bpmn:outgoing>
    </bpmn:eventBasedGateway>
    <bpmn:intermediateCatchEvent id="Event_07ov6ms" name="Just Waiting Five More Minutes">
      <bpmn:incoming>Flow_09l5l7b</bpmn:incoming>
      <bpmn:outgoing>Flow_0vevyk7</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_1y4hp0o">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT5M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:serviceTask id="HandleReceiveMissingTask" name="Handle Receive Missing Task" camunda:class="org.eyematics.process.service.receive.HandleReceiveMissingTask">
      <bpmn:incoming>Flow_0vevyk7</bpmn:incoming>
      <bpmn:outgoing>Flow_1b2a91b</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_1jcri34" name="Download Requested Data Task" camunda:class="org.eyematics.process.service.receive.DownloadRequestedDataTask">
      <bpmn:incoming>Flow_1yddvh5</bpmn:incoming>
      <bpmn:outgoing>Flow_1tp0mzp</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_1hl1qef" name="Decrypt Requested Data Task" camunda:class="org.eyematics.process.service.receive.DecryptRequestedDataTask">
      <bpmn:incoming>Flow_1tp0mzp</bpmn:incoming>
      <bpmn:outgoing>Flow_0wa03w3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sendTask id="Activity_0gql6ai" name="Acknowledge Received Message Task" camunda:class="org.eyematics.process.message.receive.AcknowledgeReceivedMessageTask">
      <bpmn:extensionElements>
        <camunda:field name="profile">
          <camunda:string>http://eyematics.org/fhir/StructureDefinition/eyematics-provide-process-receive-receipt-structure-definition|#{version}</camunda:string>
        </camunda:field>
        <camunda:field name="messageName">
          <camunda:string>provideProcessReceiveReceiptEventMessage</camunda:string>
        </camunda:field>
        <camunda:field name="instantiatesCanonical">
          <camunda:string>http://eyematics.org/bpe/Process/eyematicsProvideProcess|#{version}</camunda:string>
        </camunda:field>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_04jzsxw</bpmn:incoming>
      <bpmn:outgoing>Flow_068312d</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:exclusiveGateway id="Gateway_0te8py9">
      <bpmn:incoming>Flow_1b2a91b</bpmn:incoming>
      <bpmn:incoming>Flow_068312d</bpmn:incoming>
      <bpmn:incoming>Flow_1fpkabu</bpmn:incoming>
      <bpmn:outgoing>Flow_04ppauf</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0vevyk7" sourceRef="Event_07ov6ms" targetRef="HandleReceiveMissingTask" />
    <bpmn:sequenceFlow id="Flow_1b2a91b" sourceRef="HandleReceiveMissingTask" targetRef="Gateway_0te8py9" />
    <bpmn:sequenceFlow id="Flow_0wa03w3" sourceRef="Activity_1hl1qef" targetRef="Gateway_1cqff6a" />
    <bpmn:sequenceFlow id="Flow_068312d" sourceRef="Activity_0gql6ai" targetRef="Gateway_0te8py9" />
    <bpmn:sequenceFlow id="Flow_1tp0mzp" sourceRef="Activity_1jcri34" targetRef="Activity_1hl1qef" />
    <bpmn:sequenceFlow id="Flow_09l5l7b" sourceRef="Gateway_1drw5fq" targetRef="Event_07ov6ms" />
    <bpmn:intermediateCatchEvent id="Event_0ofoxx2" name="Receive Process Start Event">
      <bpmn:incoming>Flow_0yo3vyn</bpmn:incoming>
      <bpmn:outgoing>Flow_1yddvh5</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_109l2yr" messageRef="Message_0mv4rmf" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_0yo3vyn" sourceRef="Gateway_1drw5fq" targetRef="Event_0ofoxx2" />
    <bpmn:sequenceFlow id="Flow_04ppauf" sourceRef="Gateway_0te8py9" targetRef="finalizeReceiveProcessTask" />
    <bpmn:sequenceFlow id="Flow_1yddvh5" sourceRef="Event_0ofoxx2" targetRef="Activity_1jcri34" />
    <bpmn:serviceTask id="PrepareReceiveDataTask" name="Prepare Receive Data Task" camunda:class="org.eyematics.process.service.receive.PrepareReceiveDataTask">
      <bpmn:incoming>Flow_18spp16</bpmn:incoming>
      <bpmn:outgoing>Flow_1wda44y</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1wda44y" sourceRef="PrepareReceiveDataTask" targetRef="Gateway_1drw5fq" />
    <bpmn:serviceTask id="finalizeReceiveProcessTask" name="Finalize Receive Process Task" camunda:class="org.eyematics.process.service.receive.FinalizeReceiveProcessTask">
      <bpmn:incoming>Flow_04ppauf</bpmn:incoming>
      <bpmn:outgoing>Flow_1utufn4</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1utufn4" sourceRef="finalizeReceiveProcessTask" targetRef="Event_0xptxan" />
    <bpmn:boundaryEvent id="Event_03i08ls" attachedToRef="Activity_1jcri34">
      <bpmn:outgoing>Flow_0z8tk5l</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_0qwh6x0" errorRef="Error_0dl1s2j" camunda:errorCodeVariable="dataDownloadFailed" />
    </bpmn:boundaryEvent>
    <bpmn:exclusiveGateway id="Gateway_1cqff6a">
      <bpmn:incoming>Flow_0wa03w3</bpmn:incoming>
      <bpmn:incoming>Flow_0z8tk5l</bpmn:incoming>
      <bpmn:incoming>Flow_1bhizx8</bpmn:incoming>
      <bpmn:outgoing>Flow_04jzsxw</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_04jzsxw" sourceRef="Gateway_1cqff6a" targetRef="Activity_0gql6ai" />
    <bpmn:sequenceFlow id="Flow_0z8tk5l" sourceRef="Event_03i08ls" targetRef="Gateway_1cqff6a" />
    <bpmn:boundaryEvent id="Event_0qm6yvu" attachedToRef="Activity_1hl1qef">
      <bpmn:outgoing>Flow_1bhizx8</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1vaei3l" errorRef="Error_0xcivx5" camunda:errorCodeVariable="dataDecryptFailed" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1bhizx8" sourceRef="Event_0qm6yvu" targetRef="Gateway_1cqff6a" />
    <bpmn:boundaryEvent id="Event_04g6rg0" attachedToRef="Activity_0gql6ai">
      <bpmn:outgoing>Flow_1fpkabu</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1f0lv96" errorRef="Error_1p8f6ky" camunda:errorCodeVariable="dataAcknowledgeError" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1fpkabu" sourceRef="Event_04g6rg0" targetRef="Gateway_0te8py9" />
  </bpmn:process>
  <bpmn:message id="Message_0mv4rmf" name="receiveProcessStartEventMessage" />
  <bpmn:message id="Message_2vm6cli" name="receiveProcessInitiateEventMessage" />
  <bpmn:error id="Error_0dl1s2j" name="dataDownloadFailed" errorCode="dataDownloadFailed" />
  <bpmn:error id="Error_0xcivx5" name="dataDecryptFailed" errorCode="dataDecryptFailed" />
  <bpmn:error id="Error_1p8f6ky" name="dataAcknowledgeError" errorCode="dataAcknowledgeError" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="eyematicsorg_eyematicsReceiveProcess">
      <bpmndi:BPMNShape id="Event_0ig3rr1_di" bpmnElement="eyematicsReceiveProcessInitiateEvent">
        <dc:Bounds x="182" y="172" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="158" y="215" width="84" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0xptxan_di" bpmnElement="Event_0xptxan">
        <dc:Bounds x="1592" y="172" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1569" y="215" width="84" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1p79n93" bpmnElement="Gateway_1drw5fq">
        <dc:Bounds x="495" y="165" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0q1rjnh" bpmnElement="Event_07ov6ms">
        <dc:Bounds x="632" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="608" y="148" width="84" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_123kulk" bpmnElement="HandleReceiveMissingTask">
        <dc:Bounds x="760" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0xmtz1m" bpmnElement="Activity_1jcri34">
        <dc:Bounds x="760" y="220" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0g7d8ph" bpmnElement="Activity_1hl1qef">
        <dc:Bounds x="920" y="220" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_01j5xfd" bpmnElement="Activity_0gql6ai">
        <dc:Bounds x="1190" y="220" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_17osmuz" bpmnElement="Gateway_0te8py9" isMarkerVisible="true">
        <dc:Bounds x="1345" y="165" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1oh0rex_di" bpmnElement="Event_0ofoxx2">
        <dc:Bounds x="632" y="242" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="608" y="285" width="84" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1b2bdbc" bpmnElement="PrepareReceiveDataTask">
        <dc:Bounds x="310" y="150" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0t19sv9_di" bpmnElement="finalizeReceiveProcessTask">
        <dc:Bounds x="1450" y="150" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1cqff6a_di" bpmnElement="Gateway_1cqff6a" isMarkerVisible="true">
        <dc:Bounds x="1095" y="235" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_04g6rg0_di" bpmnElement="Event_04g6rg0">
        <dc:Bounds x="1272" y="282" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0qm6yvu_di" bpmnElement="Event_0qm6yvu">
        <dc:Bounds x="1002" y="282" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_03i08ls_di" bpmnElement="Event_03i08ls">
        <dc:Bounds x="842" y="282" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_18spp16_di" bpmnElement="Flow_18spp16">
        <di:waypoint x="218" y="190" />
        <di:waypoint x="310" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0a8xmb3" bpmnElement="Flow_0vevyk7">
        <di:waypoint x="668" y="120" />
        <di:waypoint x="760" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0lo7b8e" bpmnElement="Flow_1b2a91b">
        <di:waypoint x="860" y="120" />
        <di:waypoint x="1370" y="120" />
        <di:waypoint x="1370" y="165" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_13ic053" bpmnElement="Flow_0wa03w3">
        <di:waypoint x="1020" y="260" />
        <di:waypoint x="1095" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1qiqzd3" bpmnElement="Flow_068312d">
        <di:waypoint x="1240" y="220" />
        <di:waypoint x="1240" y="190" />
        <di:waypoint x="1345" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1tp0mzp_di" bpmnElement="Flow_1tp0mzp">
        <di:waypoint x="860" y="260" />
        <di:waypoint x="920" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_09l5l7b_di" bpmnElement="Flow_09l5l7b">
        <di:waypoint x="520" y="165" />
        <di:waypoint x="520" y="120" />
        <di:waypoint x="632" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0yo3vyn_di" bpmnElement="Flow_0yo3vyn">
        <di:waypoint x="520" y="215" />
        <di:waypoint x="520" y="260" />
        <di:waypoint x="632" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04ppauf_di" bpmnElement="Flow_04ppauf">
        <di:waypoint x="1395" y="190" />
        <di:waypoint x="1450" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yddvh5_di" bpmnElement="Flow_1yddvh5">
        <di:waypoint x="668" y="260" />
        <di:waypoint x="760" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1wda44y_di" bpmnElement="Flow_1wda44y">
        <di:waypoint x="410" y="190" />
        <di:waypoint x="495" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1utufn4_di" bpmnElement="Flow_1utufn4">
        <di:waypoint x="1550" y="190" />
        <di:waypoint x="1592" y="190" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04jzsxw_di" bpmnElement="Flow_04jzsxw">
        <di:waypoint x="1145" y="260" />
        <di:waypoint x="1190" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0z8tk5l_di" bpmnElement="Flow_0z8tk5l">
        <di:waypoint x="860" y="318" />
        <di:waypoint x="860" y="350" />
        <di:waypoint x="1120" y="350" />
        <di:waypoint x="1120" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1bhizx8_di" bpmnElement="Flow_1bhizx8">
        <di:waypoint x="1020" y="318" />
        <di:waypoint x="1020" y="350" />
        <di:waypoint x="1120" y="350" />
        <di:waypoint x="1120" y="285" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fpkabu_di" bpmnElement="Flow_1fpkabu">
        <di:waypoint x="1290" y="318" />
        <di:waypoint x="1290" y="350" />
        <di:waypoint x="1370" y="350" />
        <di:waypoint x="1370" y="215" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
